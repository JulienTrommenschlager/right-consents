---
title: Records & Receipts
permalink: /docs/records-receipts/
excerpt: "What are the caracteristics and the differences between Records and Receipts"
last_modified_at: 2020-12-28
toc: true
---

Right Consent generates two types of output : Consent Records and Consent Receipts.

## Consent Records

![Record Anatomy](/right-consents/assets/images/record-anatomy.png)

Consent Records are designed to **store the answers** of a subject regarding consent or preference. The goal is to **create a ground truth** (more or less like a access control list) that will be queried when needed. It has to give **very fast query results** and to avoid locks during creation to allows a **good througput in writing** new values.

Consent Records are **stored atomically**. That means that if a Consent Form holds 6 elements (2 processing and 4 preferences), 6 records will be generated within **the same transaction id**. This atomicity allows to retrieve a value for a specific element key or serial and to evaluate this value in another form composition (aka with different elements displayed).

Consent Records takes into consideration answers given for a **specific model version**, ensuring that new MAJOR model versions will be able to have an **impact on previous records**. This is done using serials more than model keys. A global serial is generated by combining the serial of basic information model displayed in the form and the serial of element consented. If any of those two serials is no more valid in a query, all records with that serial will be evaluated as invalid.

Consent Records **stores the value** given by the subject for that particular element. Depending on the element type it can be a boolean, a string or a list of string.

Finally, it **keeps track** of the context by storing extra informations like author, attributes or even comment.

**Status validity** of a record is **NOT stored** in the base to avoid complex updates. It is a transient information **evaluated at runtime**. The evaluation algorithm use a query context to extract relevant records and then apply a set of specific rules to decide a status. Business rules can be customized. Evaluation status can then differ if query context is not the same, even for a single element.

Consent Records storage is designed to be performant in writing speed but also at evaluation time. It is stored in a single table but specific index (and sharding) strategies are designed in that objective.

## Consent Receipt
